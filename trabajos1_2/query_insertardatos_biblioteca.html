<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Script de Inserción SQL - Sistema de Biblioteca</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/sql.min.js"></script>

    <style>
        :root {
            --bg-color: #f3f4f6;
            --text-color: #1f2937;
            --code-bg: #282c34;
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --success-color: #10b981;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 40px 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            max-width: 900px;
            width: 100%;
            background-color: #ffffff;
            padding: 30px 40px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05), 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-top: 0;
            margin-bottom: 8px;
            color: #111827;
        }

        p.description {
            color: #4b5563;
            margin-bottom: 24px;
            font-size: 0.95rem;
        }

        .code-wrapper {
            position: relative;
            border-radius: 6px;
            overflow: hidden;
            background-color: var(--code-bg);
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 16px;
            background-color: #1e2227;
            border-bottom: 1px solid #3e4451;
        }

        .code-title {
            color: #abb2bf;
            font-size: 0.85rem;
            font-family: monospace;
        }

        .copy-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .copy-btn:hover {
            background-color: var(--primary-hover);
        }

        .copy-btn:active {
            transform: scale(0.98);
        }

        .copy-btn.copied {
            background-color: var(--success-color);
        }

        pre {
            margin: 0;
            padding: 20px;
            overflow-x: auto;
        }

        code {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Datos Iniciales para Base de Datos</h1>
        <p class="description">Script SQL para poblar las tablas del sistema de biblioteca. Incluye autores, editoriales, libros, usuarios, ejemplares y préstamos de prueba.</p>

        <div class="code-wrapper">
            <div class="code-header">
                <span class="code-title">insert_biblioteca.sql</span>
                <button class="copy-btn" id="copyBtn" onclick="copyCode()">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                    </svg>
                    <span>Copiar código</span>
                </button>
            </div>
            <pre><code class="language-sql" id="sqlCode">BEGIN TRANSACTION;

-- 1. Insertar AUTORES
INSERT INTO AUTOR (ID, NOMBRE, NACIONALIDAD, BIBLIOGRAFIA) VALUES 
(1, 'Gabriel García Márquez', 'Colombiana', 'Premio Nobel de Literatura 1982'),
(2, 'J.K. Rowling', 'Británica', 'Autora de la saga Harry Potter'),
(3, 'George Orwell', 'Británica', 'Periodista y escritor distópico'),
(4, 'Isaac Asimov', 'Rusa-Estadounidense', 'Padre de la ciencia ficción moderna');

-- 2. Insertar EDITORIALES
INSERT INTO EDITORIAL (ID, NOMBRE, DIRECCION, EMAIL) VALUES 
(1, 'Editorial Sudamericana', 'Buenos Aires, Argentina', 'contacto@sudamericana.com'),
(2, 'Bloomsbury Publishing', 'London, UK', 'info@bloomsbury.com'),
(3, 'Penguin Books', 'New York, USA', 'sales@penguin.com');

-- 3. Insertar LIBROS (Datos generales)
INSERT INTO LIBRO (ID, TITULO, ISBN, GENERO, IDIOMA, PAGINAS, FECHA_PUBLICACION) VALUES 
(1, 'Cien años de soledad', '978-0307474728', 'Realismo Mágico', 'Español', 471, '1967-06-05'),
(2, 'Harry Potter y la piedra filosofal', '978-8478884452', 'Fantasía', 'Español', 254, '1997-06-26'),
(3, '1984', '978-0451524935', 'Distopía', 'Inglés', 328, '1949-06-08'),
(4, 'Yo, Robot', '978-0553294385', 'Ciencia Ficción', 'Inglés', 253, '1950-12-02');

-- 4. Relacionar LIBRO con AUTOR (Tabla intermedia)
INSERT INTO LIBRO_AUTOR (LIBRO_ID, AUTOR_ID, ORDEN_AUTORIA, ROL) VALUES 
(1, 1, 1, 'Autor principal'),
(2, 2, 1, 'Autor principal'),
(3, 3, 1, 'Autor principal'),
(4, 4, 1, 'Autor principal');

-- 5. Insertar USUARIOS (Alumnos, Docentes, Admin)
INSERT INTO USUARIO (ID, NOMBRE, EMAIL, TIPO, ACTIVO) VALUES 
(1, 'Juan Pérez', 'juan.perez@universidad.edu', 'alumno', 1),
(2, 'María González', 'maria.g@universidad.edu', 'docente', 1),
(3, 'Pedro Admin', 'admin@universidad.edu', 'admin', 1),
(4, 'Luis Inactivo', 'luis.baja@universidad.edu', 'alumno', 0);

-- 6. Insertar EDICIONES (Un libro puede tener varias ediciones)
INSERT INTO EDICION (ID, LIBRO_ID, EDITORIAL_ID, NUM_EDICION, FECHA_LANZAMIENTO, ISBN_EDICION) VALUES 
(1, 1, 1, 1, '1967-06-05', '978-0307474728-ED1'),
(2, 1, 3, 2, '2000-05-10', '978-0307474728-ED2'),
(3, 2, 2, 1, '1997-06-26', '978-8478884452-ED1'),
(4, 3, 3, 1, '1949-06-08', '978-0451524935-ED1');

-- 7. Insertar EJEMPLARES (Copias físicas)
INSERT INTO EJEMPLAR (ID, EDICION_ID, CODIGO_BARRAS, UBICACION, ESTADO) VALUES 
(1, 1, 'CB-0001', 'Pasillo A, Estante 1', 'prestado'),
(2, 1, 'CB-0002', 'Pasillo A, Estante 1', 'disponible'),
(3, 3, 'CB-0003', 'Pasillo B, Estante 2', 'mantenimiento'),
(4, 4, 'CB-0004', 'Pasillo C, Estante 4', 'prestado');

-- 8. Insertar PRESTAMOS (Cabecera)
INSERT INTO PRESTAMO (ID, USUARIO_ID, FECHA_PRESTAMO, ESTADO) VALUES 
(1, 1, date('now', '-7 days'), 'activo'),
(2, 2, date('now', '-2 days'), 'activo'),
(3, 1, date('now', '-30 days'), 'cerrado');

-- 9. Insertar DETALLE DE PRESTAMOS (Items)
INSERT INTO PRESTAMO_ITEM (PRESTAMO_ID, EJEMPLAR_ID, FECHA_VENCIMIENTO, FECHA_DEVOLUCION, ESTADO, MULTA_MXN) VALUES 
(1, 1, date('now', '+7 days'), NULL, 'activo', 0), 
(2, 4, date('now', '+12 days'), NULL, 'activo', 0),
(3, 2, date('now', '-15 days'), date('now', '-20 days'), 'devuelto', 0);

-- 10. Insertar RESERVAS
INSERT INTO RESERVA (ID, USUARIO_ID, LIBRO_ID, FECHA_RESERVA, ESTADO) VALUES 
(1, 1, 2, date('now'), 'activa');

COMMIT;</code></pre>
        </div>
    </div>

    <script>
        // Inicializar el resaltado de sintaxis
        hljs.highlightAll();

        // Función para copiar al portapapeles
        function copyCode() {
            const codeContent = document.getElementById('sqlCode').innerText;
            const btn = document.getElementById('copyBtn');
            const span = btn.querySelector('span');
            const originalText = span.innerText;

            navigator.clipboard.writeText(codeContent).then(() => {
                // Cambiar el estado visual del botón
                btn.classList.add('copied');
                span.innerText = '¡Copiado!';

                // Restaurar el botón después de 2 segundos
                setTimeout(() => {
                    btn.classList.remove('copied');
                    span.innerText = originalText;
                }, 2000);
            }).catch(err => {
                console.error('Error al copiar el código: ', err);
                span.innerText = 'Error al copiar';
            });
        }
    </script>
</body>
</html>